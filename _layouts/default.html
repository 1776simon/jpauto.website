<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Google Fonts - Range Rover inspired typography -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&family=Nunito+Sans:wght@300;400;600;700;800&display=swap" rel="stylesheet">

  <!-- JP AUTO Brand System -->
  <link rel="stylesheet" href="/brand/dist/brand.css">

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'primary': '#083344',
            'primary-dark': '#05232e',
            'primary-light': '#0d4d62'
          }
        }
      },
      plugins: [
        // Enable typography plugin for prose classes
        function({ addBase, addComponents, addUtilities }) {
          addUtilities({
            '.prose': {
              maxWidth: '65ch',
              color: '#374151',
            },
            '.prose h2': {
              fontSize: '1.875rem',
              fontWeight: '700',
              marginTop: '3rem',
              marginBottom: '1.5rem',
              color: '#111827',
            },
            '.prose h3': {
              fontSize: '1.5rem',
              fontWeight: '700',
              marginTop: '2rem',
              marginBottom: '1rem',
              color: '#111827',
            },
            '.prose h4': {
              fontSize: '1.25rem',
              fontWeight: '600',
              marginTop: '1.5rem',
              marginBottom: '0.75rem',
              color: '#111827',
            },
            '.prose p': {
              marginBottom: '1.5rem',
              lineHeight: '1.75',
            },
            '.prose ul, .prose ol': {
              marginBottom: '1.5rem',
              paddingLeft: '1.5rem',
            },
            '.prose li': {
              marginBottom: '0.5rem',
              lineHeight: '1.75',
            },
            '.prose strong': {
              fontWeight: '600',
              color: '#111827',
            },
            '.prose a': {
              color: '#083344',
              textDecoration: 'underline',
            },
            '.prose a:hover': {
              color: '#05232e',
            },
            '.prose blockquote': {
              borderLeftWidth: '4px',
              borderLeftColor: '#083344',
              paddingLeft: '1rem',
              fontStyle: 'italic',
              marginBottom: '1.5rem',
              color: '#4b5563',
            },
            '.prose code': {
              backgroundColor: '#f3f4f6',
              padding: '0.125rem 0.375rem',
              borderRadius: '0.25rem',
              fontSize: '0.875em',
            },
            '.prose pre': {
              backgroundColor: '#1f2937',
              color: '#f9fafb',
              padding: '1rem',
              borderRadius: '0.5rem',
              marginBottom: '1.5rem',
              overflowX: 'auto',
            },
            '.prose hr': {
              borderTopWidth: '1px',
              borderColor: '#e5e7eb',
              marginTop: '3rem',
              marginBottom: '3rem',
            },
          });
        }
      ]
    }
  </script>

  <!-- SEO Tags (includes title and description) -->
  {% seo %}

  <!-- Favicon -->
  <link rel="icon" type="image/jpeg" href="/assets/images/favicon.jpg">
  <link rel="apple-touch-icon" href="/assets/images/favicon.jpg">

  <!-- Custom Styles -->
  <style>
    /* Smooth scrolling */
    html {
      scroll-behavior: smooth;
    }

    /* Apply Range Rover-inspired fonts */
    body {
      font-family: 'Montserrat', 'Lato', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    }

    h1, h2, h3, h4, h5, h6 {
      font-family: 'Nunito Sans', 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
      font-weight: 700;
    }

    /* Custom scrollbar with brand colors */
    ::-webkit-scrollbar {
      width: 10px;
    }

    ::-webkit-scrollbar-track {
      background: var(--color-card);
    }

    ::-webkit-scrollbar-thumb {
      background: var(--color-primary);
      border-radius: 5px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--color-primary-dark);
    }

    /* Price Badge with Cut Corner */
    .price-badge {
      position: relative;
      clip-path: polygon(12px 0, 100% 0, 100% 100%, 0 100%, 0 12px);
    }

    .price-badge-wrapper {
      position: relative;
    }

    .price-cut-corner::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 0;
      height: 0;
      border-style: solid;
      border-width: 12px 12px 0 0;
      border-color: white transparent transparent transparent;
      z-index: 10;
    }

    /* Vehicle Photo Bottom Bar Overlay */
    .vehicle-card a:first-of-type .bg-primary {
      background-color: #083344;
      font-family: 'Montserrat', sans-serif;
    }

    .vehicle-card a:first-of-type {
      position: relative;
      z-index: 1;
    }

    /* Responsive font sizing for photo overlay */
    @media (max-width: 640px) {
      .vehicle-card a:first-of-type .bg-primary {
        font-size: 10px;
        padding: 6px 8px;
      }
    }

    @media (min-width: 641px) and (max-width: 1024px) {
      .vehicle-card a:first-of-type .bg-primary {
        font-size: 11px;
      }
    }

    /* Ensure line-clamp works */
    .line-clamp-2 {
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    /* Form select dropdown options styling */
    select option {
      background-color: rgb(55, 65, 81); /* bg-gray-700 */
      color: white;
    }

    /* Input autofill styling for dark theme - includes Edge support */
    input:-webkit-autofill,
    input:-webkit-autofill:hover,
    input:-webkit-autofill:focus,
    input:-webkit-autofill:active,
    select:-webkit-autofill,
    select:-webkit-autofill:hover,
    select:-webkit-autofill:focus,
    select:-webkit-autofill:active {
      -webkit-box-shadow: 0 0 0 30px rgb(55, 65, 81) inset !important;
      -webkit-text-fill-color: white !important;
      box-shadow: 0 0 0 30px rgb(55, 65, 81) inset !important;
      color: white !important;
      transition: background-color 5000s ease-in-out 0s;
    }

    /* Ensure input fields maintain white text */
    input[type="text"],
    input[type="email"],
    input[type="tel"],
    input[type="number"],
    input[type="date"],
    select {
      color: white !important;
    }

    /* Force all text in prose content to be white */
    .prose p,
    .prose li,
    .prose a,
    .prose span,
    .prose div,
    .prose strong,
    .prose em,
    .prose blockquote {
      color: white !important;
    }

    .prose a:hover {
      color: #d1d5db !important; /* gray-300 for hover */
    }
  </style>
</head>
<body class="antialiased" style="background-color: var(--color-background); color: var(--color-foreground);">

  {% include header.html %}

  <main>
    {{ content }}
  </main>

  {% include footer.html %}

  {% include contact-modal.html %}

  <!-- Back to Top Button -->
  <button id="back-to-top" class="fixed bottom-8 right-8 bg-primary text-white p-3 rounded-full shadow-lg hover:bg-primary-dark transition opacity-0 pointer-events-none">
    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18"></path>
    </svg>
  </button>

  <script>
    // Back to top button functionality
    const backToTopButton = document.getElementById('back-to-top');

    window.addEventListener('scroll', () => {
      if (window.pageYOffset > 300) {
        backToTopButton.classList.remove('opacity-0', 'pointer-events-none');
      } else {
        backToTopButton.classList.add('opacity-0', 'pointer-events-none');
      }
    });

    backToTopButton.addEventListener('click', () => {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });

    // Desktop click-to-call handler
    // On desktop (screen width >= 1024px), disable tel: links (just show as text)
    // On mobile, keep tel: links active so they open phone app
    document.addEventListener('DOMContentLoaded', () => {
      function handleTelLinks() {
        const isDesktop = window.innerWidth >= 1024;

        document.querySelectorAll('a[href^="tel:"]').forEach(link => {
          if (isDesktop) {
            // Desktop: disable the link, make it plain text
            link.style.pointerEvents = 'none';
            link.style.textDecoration = 'none';
            link.style.color = 'inherit';
          } else {
            // Mobile: enable the link
            link.style.pointerEvents = 'auto';
            link.style.textDecoration = '';
            link.style.color = '';
          }
        });
      }

      // Run on load and on resize
      handleTelLinks();
      window.addEventListener('resize', handleTelLinks);
    });
  </script>
</body>
</html>
